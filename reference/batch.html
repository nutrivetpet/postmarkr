<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Batch Object - Collection of Email or Template Objects — batch • postmarkr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Batch Object - Collection of Email or Template Objects — batch"><meta name="description" content="Creates a Batch object for sending multiple emails or templates via the
Postmark batch API. This wraps a collection of messages (either Email or
Template objects) and manages the complexities of Postmark's batch API:

Homogeneity validation: All messages must be the same type
(either all Email or all Template)
Automatic chunking: Splits large batches into API-compliant
chunks of 500 messages (Postmark's limit)
Configurable chunk size: Allows smaller chunks for testing or
rate limiting


Batch API Endpoints:
For Email messages: /email/batch
For Template messages: /email/batchWithTemplates


Important Limitations:
Maximum 500 messages per API call (handled automatically via chunking)
Maximum 50 MB total payload size per chunk
Each message still subject to individual limits (50 recipients, 10 MB)

"><meta property="og:description" content="Creates a Batch object for sending multiple emails or templates via the
Postmark batch API. This wraps a collection of messages (either Email or
Template objects) and manages the complexities of Postmark's batch API:

Homogeneity validation: All messages must be the same type
(either all Email or all Template)
Automatic chunking: Splits large batches into API-compliant
chunks of 500 messages (Postmark's limit)
Configurable chunk size: Allows smaller chunks for testing or
rate limiting


Batch API Endpoints:
For Email messages: /email/batch
For Template messages: /email/batchWithTemplates


Important Limitations:
Maximum 500 messages per API call (handled automatically via chunking)
Maximum 50 MB total payload size per chunk
Each message still subject to individual limits (50 recipients, 10 MB)

"><meta property="og:image" content="https://nutrivetpet.github.io/postmarkr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">postmarkr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nutrivetpet/postmarkr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Batch Object - Collection of Email or Template Objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/nutrivetpet/postmarkr/blob/main/R/batch.R" class="external-link"><code>R/batch.R</code></a></small>
      <div class="d-none name"><code>batch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a Batch object for sending multiple emails or templates via the
Postmark batch API. This wraps a collection of messages (either <code>Email</code> or
<code>Template</code> objects) and manages the complexities of Postmark's batch API:</p>
<ul><li><p><strong>Homogeneity validation</strong>: All messages must be the same type
(either all <code>Email</code> or all <code>Template</code>)</p></li>
<li><p><strong>Automatic chunking</strong>: Splits large batches into API-compliant
chunks of 500 messages (Postmark's limit)</p></li>
<li><p><strong>Configurable chunk size</strong>: Allows smaller chunks for testing or
rate limiting</p></li>
</ul><p><strong>Batch API Endpoints:</strong></p><ul><li><p>For <code>Email</code> messages: <code>/email/batch</code></p></li>
<li><p>For <code>Template</code> messages: <code>/email/batchWithTemplates</code></p></li>
</ul><p><strong>Important Limitations:</strong></p><ul><li><p>Maximum 500 messages per API call (handled automatically via chunking)</p></li>
<li><p>Maximum 50 MB total payload size per chunk</p></li>
<li><p>Each message still subject to individual limits (50 recipients, 10 MB)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">batch</span><span class="op">(</span><span class="va">messages</span>, chunk_size <span class="op">=</span> <span class="va">POSTMARK_MAX_BATCH_SIZE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">Batch</span><span class="op">(</span>messages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, chunk_size <span class="op">=</span> <span class="fl">500L</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-messages">messages<a class="anchor" aria-label="anchor" href="#arg-messages"></a></dt>
<dd><p>List of <code>Email</code> or <code>Template</code> objects. All must be the same
class. Use <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> or similar to create multiple messages programmatically.</p></dd>


<dt id="arg-chunk-size">chunk_size<a class="anchor" aria-label="anchor" href="#arg-chunk-size"></a></dt>
<dd><p>Integer scalar. Maximum messages per API call. Default is
500 (Postmark's limit). Set lower for testing (e.g., 50) or conservative
rate limiting (e.g., 100). Must be positive and not exceed 500.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><a href="https://postmarkapp.com/developer/api/email-api#send-batch-emails" class="external-link">https://postmarkapp.com/developer/api/email-api#send-batch-emails</a>
for Email batch API</p></li>
<li><p><a href="https://postmarkapp.com/developer/api/templates-api#send-batch-with-templates" class="external-link">https://postmarkapp.com/developer/api/templates-api#send-batch-with-templates</a>
for Template batch API</p></li>
<li><p><code><a href="email.html">email()</a></code> for single email messages</p></li>
<li><p><code><a href="template.html">template()</a></code> for template-based messages</p></li>
<li><p><code><a href="send.html">send()</a></code> for sending batches</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Batch of regular emails (e.g., 1000 personalized emails)</span></span></span>
<span class="r-in"><span><span class="va">emails</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="email.html">email</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    from <span class="op">=</span> <span class="st">"sender@example.com"</span>,</span></span>
<span class="r-in"><span>    to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"user%d@example.com"</span>, <span class="va">i</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Welcome User %d"</span>, <span class="va">i</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    html_body <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"&lt;p&gt;Hello User %d!&lt;/p&gt;"</span>, <span class="va">i</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_batch</span> <span class="op">&lt;-</span> <span class="fu">batch</span><span class="op">(</span>messages <span class="op">=</span> <span class="va">emails</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Send batch</span></span></span>
<span class="r-in"><span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="client.html">client</a></span><span class="op">(</span>token <span class="op">=</span> <span class="st">"&lt;token&gt;"</span>, message_stream <span class="op">=</span> <span class="st">"outbound"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="send.html">send</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">my_batch</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Batch of template emails</span></span></span>
<span class="r-in"><span><span class="va">recipients</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"alice@example.com"</span>, <span class="st">"bob@example.com"</span>, <span class="st">"charlie@example.com"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">templates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">recipients</span>, <span class="kw">function</span><span class="op">(</span><span class="va">email</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="template.html">template</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    from <span class="op">=</span> <span class="st">"notifications@example.com"</span>,</span></span>
<span class="r-in"><span>    to <span class="op">=</span> <span class="va">email</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="fl">12345678L</span>,</span></span>
<span class="r-in"><span>    template_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      company_name <span class="op">=</span> <span class="st">"ACME Corp"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_batch</span> <span class="op">&lt;-</span> <span class="fu">batch</span><span class="op">(</span>messages <span class="op">=</span> <span class="va">templates</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="send.html">send</a></span><span class="op">(</span><span class="va">client</span>, <span class="va">my_batch</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrea Ranzato, <a href="https://www.nutrivetpet.com" class="external-link"><img src="https://www.nutrivetpet.com/favicon/logo.png" height="50" alt="nutrivetpet Srls"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

